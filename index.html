<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>SmooScroll 平滑滚动页面 | Smooth your scroll</title>
    <link rel="icon" href="https://ik.imagekit.io/shunin/SmooScroll/smooscroll-logo.svg">
  <style>
    #scroll-container {
        overflow: auto;
        width: 100vw;
        height: 100vh;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    body {
        background: linear-gradient(100deg, rgb(240 , 160 , 160), rgb(240 , 160 , 100));
        background-attachment: fixed;
        overflow: hidden; /* 防止双滚动条 */
        margin: 0;
    }
    
    .logo {
        transition: 0.5s;
    }
    .logo:hover{
        rotate: -10deg;
        cursor: pointer;
    }

    .container {
        background: linear-gradient(20deg, aliceblue , lightblue);
        width: 50vw;
        margin-left: auto;
        margin-right: auto;
        margin-top: 1vw;
        margin-bottom: 1vw;
        border-radius: 2vw;
        transition: 0.5s;
        padding: 0;
    }
    .container:hover {
        margin-top: 0.5vw;
        margin-bottom: 0.5vw;
        width: 51vw;
        padding: 1vw;
    }
  </style>
</head>
<body>
  <div id="scroll-container">
    <div id="smooth-content">
        <div style="position: relative; text-align: center;">
            <div style="position: absolute; margin: 0 auto; left: 0;right: 0;">
                <img src="https://ik.imagekit.io/shunin/SmooScroll/smooscroll-logo.svg" style="width: 10vw; margin-top: 6vw; margin-bottom: 6vw;" class="logo">
                <p style="font-size: 1.4vw;">基于默认滚动条的平滑滚动JS<br>平滑滚动页面 | Smooth your scroll</p>
                <p style="font-size: 1vw; width: 30vw; margin-top: 1vw; margin-left: auto; margin-right: auto; margin-bottom: 5vw;">SmooScroll是一个用于静态HTML网页的平滑滚动JS，基于原生JavaScript所以不需要任何依赖（比如jQuery、Vue等等）。<br>SmooScroll的效果基于原生滚动条，不会屏蔽默认滚动条或创建假滚动条。</p>
                <div class="container">
                    <h2 style="padding-top: 3vw; padding-bottom: 2vw;">为什么使用SmooScroll？</h2>
                    <p style="font-size: 1vw; width: 40vw; margin: 0 auto; text-align: left; padding-bottom: 3vw;">或许你已经了解过类似的网页滚动JS，比如<a href="https://github.com/darkroomengineering/lenis" target="_blank">Lenis</a>或<a href="https://gsap.com/docs/v3/Plugins/ScrollSmoother/" target="_blank">GSAP ScrollSmoother</a>。<br><br>

                        与Lenis不同的一点是，SmooScroll的平滑滚动效果并不直接作用在滚动条上。最直观的区别就是，当使用键盘方向键或直接拖拽滚动条时，页面仍然会平滑的滚动，而不是与滚动条的移动直接绑定，效果更类似ScrollSmoother。<br>
                        而ScrollSmoother是GSAP的一个付费用户组插件，使用它需要 150USD（约1000CNY） 一年的会员，如果只是想给网页添加平滑滚动效果，那么这个使用成本对于个人开发者/业余爱好者来说还是偏高。<br><br>
                        
                        所以如上所言，如果只需要给网页整体添加一个平滑滚动效果，对于爱好者的轻度应用场景来说，SmooScroll会是一个不错的选择（当然，是在我把bug修复以后:P）。<br>
                        如果你不需要拖拽滚动条/键盘方向键控制时的平滑滚动效果，那么使用Lenis也足够了。</p>
                </div>
                <div style="margin: 5vw;"></div>
                <div class="container">
                    <h1 style="padding-top: 3vw; padding-bottom: 2vw;">现在开始使用SmooScroll！</h1>
                    <a href="https://github.com/ShuninYu/SmooScroll" target="_blank" style="color: black; ">
                        <svg aria-hidden="true" viewBox="0 0 24 24" version="1.1" width="5vw" data-view-component="true">
                            <path d="M12 1C5.9225 1 1 5.9225 1 12C1 16.8675 4.14875 20.9787 8.52125 22.4362C9.07125 22.5325 9.2775 22.2025 9.2775 21.9137C9.2775 21.6525 9.26375 20.7862 9.26375 19.865C6.5 20.3737 5.785 19.1912 5.565 18.5725C5.44125 18.2562 4.905 17.28 4.4375 17.0187C4.0525 16.8125 3.5025 16.3037 4.42375 16.29C5.29 16.2762 5.90875 17.0875 6.115 17.4175C7.105 19.0812 8.68625 18.6137 9.31875 18.325C9.415 17.61 9.70375 17.1287 10.02 16.8537C7.5725 16.5787 5.015 15.63 5.015 11.4225C5.015 10.2262 5.44125 9.23625 6.1425 8.46625C6.0325 8.19125 5.6475 7.06375 6.2525 5.55125C6.2525 5.55125 7.17375 5.2625 9.2775 6.67875C10.1575 6.43125 11.0925 6.3075 12.0275 6.3075C12.9625 6.3075 13.8975 6.43125 14.7775 6.67875C16.8813 5.24875 17.8025 5.55125 17.8025 5.55125C18.4075 7.06375 18.0225 8.19125 17.9125 8.46625C18.6138 9.23625 19.04 10.2125 19.04 11.4225C19.04 15.6437 16.4688 16.5787 14.0213 16.8537C14.42 17.1975 14.7638 17.8575 14.7638 18.8887C14.7638 20.36 14.75 21.5425 14.75 21.9137C14.75 22.2025 14.9563 22.5462 15.5063 22.4362C19.8513 20.9787 23 16.8537 23 12C23 5.9225 18.0775 1 12 1Z"></path>
                        </svg>
                        <p style="font-size: 1vw;">Get SmooScroll from GitHub</p>
                    </a>
                    <div style="padding-bottom: 3vw;"></div>
                </div>
                <div style="margin: 5vw;"></div>
               

                <div style="width: 80vw; height: 1px; border-top: 1px dashed rgb(0, 0, 0); margin: 0 10vw;"></div>
                <footer style="text-align: center; margin-left: 8.5vw; margin-right: 8.5vw; font-weight: lighter; font-size: small; padding-bottom: 3vw">
                    <p style="margin-top: 2vw;">This website uses SmooScroll.</p>
                    <p style="color: rgb(0, 0, 0); user-select: none; margin-top: 1vw;">©2022 <a href="https://www.shuninyu.fun" style="color: rgb(0, 0, 0); text-decoration: none; padding-right: 4vw;">ShuninYu | 孤灯从流</a>contact:<a href="mailto:shuninyu@outlook.com" style="color: black;">shuninyu@outlook.com</a></p>
                </footer>
            </div>

            <div style="position: absolute; font-size: 2vw; top: 17vw; left: 43.4vw; z-index: 1;"><p style="display: inline-block; font-size: 3vw;">S</p>moo<p style="display: inline-block; color: rgb(255, 255, 255);">th</p></div>
            <div style="position: absolute; font-size: 2vw; top: 17vw; left: 49.7vw; z-index: 2;"><p style="display: inline-block; color: rgb(0, 0, 0); font-size: 3vw;">S</p>croll</div>
        </div>
    </div>
  </div>

  <script>
    /*
    SmooScroll.js
    Author 孤灯从流Shuninyu
    version 0.2.0 alpha
    */
    document.addEventListener('DOMContentLoaded', function () {
        // 配置参数
        const config = {
            backToTopImage: 'https://ik.imagekit.io/shunin/SmooScroll/BackToTop.svg', // 返回顶部按钮图片路径 path to your button image
            showAtPosition: 80, // 显示按钮的滚动距离 show backtotop button when this far(px) you scroll
            scrollDuration: 800, // 返回顶部动画时长 duration of back to top movement
            friction: 0.04, //滚动惯性系数(平滑程度)，0.01最平滑但过渡最久 smoothness of movement, 0.01 for smoothest but longest transform
            threshold: 1 //停止动画的阈值（像素），当还剩多少像素时让滚动直接到位 threshold of movement, when gap is smaller than this number(px), scrolling will reach the target position rightaway
        };

        function initSmoothScroll() {
            const scrollContainer = document.getElementById('scroll-container');
            const smoothContent = document.getElementById('smooth-content');

            // 创建返回顶部按钮
            const backToTopBtn = document.createElement('img');
            backToTopBtn.src = config.backToTopImage;
            //返回顶部按钮样式，可自定义
            backToTopBtn.style.cssText = `
                position: fixed;
                bottom: 3vw;
                right: 3vw;
                width: 4vw;
                height: 4vw;
                cursor: pointer;
                opacity: 0;
                transition: opacity 0.3s;
                pointer-events: none;
                z-index: 1000;
                background-size: contain;
                image-rendering: pixelated;
                `;
            document.body.appendChild(backToTopBtn);

            let targetScroll = { x: 0, y: 0 };
            let currentScroll = { x: scrollContainer.scrollLeft, y: scrollContainer.scrollTop };
            let animationFrameId = null;

            function applyTransform() {
                smoothContent.style.transform = `translate(
                ${-currentScroll.x}px,
                ${-currentScroll.y}px
                )`;
            }

            function animate() {
                const dx = targetScroll.x - currentScroll.x;
                const dy = targetScroll.y - currentScroll.y;

                currentScroll.x += dx * config.friction;
                currentScroll.y += dy * config.friction;

                if (Math.abs(dx) < config.threshold && Math.abs(dy) < config.threshold) {
                    currentScroll.x = targetScroll.x;
                    currentScroll.y = targetScroll.y;
                    animationFrameId = null;
                } else {
                    animationFrameId = requestAnimationFrame(animate);
                }

                applyTransform();
            }

            // 返回顶部功能
            function scrollToTop() {
                targetScroll.y = 0;
                scrollContainer.scrollTop = 0;
                if (!animationFrameId) {
                    animationFrameId = requestAnimationFrame(animate);
                }
            }

            // 事件监听
            scrollContainer.addEventListener('scroll', () => {
                targetScroll.x = scrollContainer.scrollLeft;
                targetScroll.y = scrollContainer.scrollTop;
                scrollContainer.scrollLeft = targetScroll.x;
                scrollContainer.scrollTop = targetScroll.y;

                // 控制按钮显示
                backToTopBtn.style.opacity = targetScroll.y > config.showAtPosition ? 1 : 0;
                backToTopBtn.style.pointerEvents = targetScroll.y > config.showAtPosition ? 'auto' : 'none';

                if (!animationFrameId) {
                    animationFrameId = requestAnimationFrame(animate);
                }
            });

            backToTopBtn.addEventListener('click', scrollToTop);
            applyTransform();
        }

        initSmoothScroll();
    });
    </script>
</body>
</html>